{"version":3,"sources":["Constants.js","Utils.js","Components/UtilityButtons/ShuffleButton.js","Components/ButtonList.js","Components/LoginButton.js","Components/App.js","index.js"],"names":["scopesList","messageActions","messageTypes","requestAuth","redirectUri","encodeURIComponent","window","location","href","scopes","join","ShuffleButton","props","access_token","updateMessageList","name","className","onClick","path","method","fields","fetch","headers","Accept","Authorization","request","body","then","response","status","type","source","text","catch","error","ButtonList","hashItems","LoginButton","App","authentication","code","payload","message","urlSearchParams","URLSearchParams","search","params","Object","fromEntries","entries","hasOwnProperty","hash","substr","split","reduce","acc","element","parts","calculateAuthentication","startingMessage","useState","id","messageList","setMessageList","messageId","setMessageId","action","value","newId","currentState","filter","map","ReactDOM","render","StrictMode","document","getElementById","console","log","process"],"mappings":"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","file":"static/js/main.35b55638.chunk.js","sourcesContent":["export const scopesList = [\n  \"user-read-private\",\n  \"user-read-email\",\n  \"user-modify-playback-state\",\n];\n\nexport const messageActions = { CREATE: \"CREATE\", DELETE: \"DELETE\" };\nexport const messageTypes = {\n  SUCCESS: \"SUCCESS\",\n  ERROR: \"ERROR\",\n  INFO: \"INFO\",\n  WARNING: \"WARNING\",\n};\n","import { scopesList } from \"./Constants\";\n\nexport const calculateAuthentication = () => {\n  const authentication = { code: null, payload: null, message: \"\" };\n\n  const urlSearchParams = new URLSearchParams(window.location.search);\n  const params = Object.fromEntries(urlSearchParams.entries());\n\n  if (params.hasOwnProperty(\"error\")) {\n    authentication.code = -1;\n    authentication.message = params.error;\n  } else if (!window.location.hash) {\n    authentication.code = 0;\n    authentication.message = \"Missing hash in the url\";\n  } else {\n    const hashItems = window.location.hash\n      .substr(1)\n      .split(\"&\")\n      .reduce((acc, element) => {\n        const parts = element.split(\"=\");\n        acc[parts[0]] = parts[1];\n        return acc;\n      }, {});\n    if (hashItems.hasOwnProperty(\"access_token\")) {\n      authentication.code = 1;\n      authentication.payload = hashItems;\n    } else {\n      authentication.code = -1;\n      authentication.message = \"Hash does not include access_token\";\n    }\n  }\n\n  return authentication;\n};\n\nexport const requestAuth = () => {\n  const redirectUri = encodeURIComponent(window.location.href);\n  const scopes = scopesList.join(\"%20\");\n  window.location.href = `https://accounts.spotify.com/authorize?client_id=125aeb2f61c242c68fe33802c481bb08&redirect_uri=${redirectUri}&scope=${scopes}&response_type=token&state=202102121300`;\n};\n\nexport const request = (path, method = \"GET\", access_token, fields = {}) =>\n  fetch(`https://api.spotify.com/v1/${path}`, {\n    method,\n    headers: {\n      Accept: \"application/json\",\n      \"Content-Type\": \"application/json\",\n      Authorization: `Bearer ${access_token}`,\n    },\n    ...fields,\n  });\n","import React from \"react\";\nimport * as PropTypes from \"prop-types\";\nimport { request } from \"../../Utils\";\nimport { messageActions, messageTypes } from \"../../Constants\";\n\nfunction ShuffleButton(props) {\n  const { access_token, updateMessageList, name } = props;\n\n  return (\n    <div>\n      <button\n        className=\"utility-btn shuffle\"\n        onClick={() => {\n          request(\"me/player/shuffle?state=true\", \"PUT\", access_token, {\n            body: \"\",\n          })\n            .then((response) => {\n              const { status } = response;\n              if (status === 204) {\n                updateMessageList(messageActions.CREATE, {\n                  type: messageTypes.SUCCESS,\n                  source: name,\n                  text: \"Your playback has been shuffled.\",\n                });\n              } else {\n                throw status;\n              }\n            })\n            .catch((error) => {\n              updateMessageList(messageActions.CREATE, {\n                type: messageTypes.ERROR,\n                source: name,\n                text: \"That didn't work; your playback was unchanged.\",\n              });\n            });\n        }}\n      >\n        Activate Shuffle\n      </button>\n    </div>\n  );\n}\n\nexport default ShuffleButton;\n\nShuffleButton.propTypes = {\n  access_token: PropTypes.string.isRequired,\n  updateMessageList: PropTypes.func.isRequired,\n  name: PropTypes.string.isRequired,\n};\n","import React from \"react\";\nimport * as PropTypes from \"prop-types\";\nimport ShuffleButton from \"./UtilityButtons/ShuffleButton\";\n\nfunction ButtonList(props) {\n  const {\n    hashItems: { access_token },\n    updateMessageList,\n  } = props;\n\n  return (\n    <div>\n      <ShuffleButton\n        access_token={access_token}\n        updateMessageList={updateMessageList}\n        name=\"Shuffle\"\n      />\n    </div>\n  );\n}\n\nexport default ButtonList;\n\nButtonList.propTypes = {\n  hashItems: PropTypes.object.isRequired,\n  updateMessageList: PropTypes.func.isRequired,\n};\n","import React from \"react\";\nimport { requestAuth } from \"../Utils\";\n\nfunction LoginButton() {\n  return (\n    <div>\n      <button className=\"regText authButton\" onClick={requestAuth}>\n        Login\n      </button>\n    </div>\n  );\n}\n\nexport default LoginButton;\n","import React, { useState } from \"react\";\nimport ButtonList from \"./ButtonList\";\nimport LoginButton from \"./LoginButton\";\nimport { calculateAuthentication } from \"../Utils\";\nimport { messageActions, messageTypes } from \"../Constants\";\n\nfunction App() {\n  const { code, message, payload } = calculateAuthentication();\n\n  const startingMessage =\n    code === -1\n      ? {\n          type: messageTypes.ERROR,\n          text: message,\n        }\n      : code === 1\n      ? {\n          type: messageTypes.SUCCESS,\n          text: \"Login succesfull!\",\n        }\n      : {\n          type: messageTypes.INFO,\n          source: \"Welcome\",\n          text: \"Please login below to use the app.\",\n        };\n\n  const [messageList, setMessageList] = useState([\n    { ...startingMessage, id: 0 },\n  ]);\n  const [messageId, setMessageId] = useState(1);\n\n  const getNewId = () => {\n    setMessageId((currentState) => currentState + 1);\n    return messageId;\n  };\n\n  const updateMessageList = (action, value) => {\n    switch (action) {\n      case messageActions.CREATE:\n        const newId = getNewId();\n        setMessageList((currentState) => [\n          ...currentState,\n          { ...value, id: newId },\n        ]);\n        return newId;\n      case messageActions.DELETE:\n        setMessageList((currentState) =>\n          currentState.filter((element) => element.id !== value)\n        );\n        return 0;\n      default:\n        return -1;\n    }\n  };\n\n  return (\n    <div>\n      {messageList.map((message) => {\n        const { type, text, source = \"\", id } = message;\n        return (\n          <div key={`msg-${id}`} className={`message msg-${type}`}>\n            <span\n              className=\"close-message\"\n              onClick={() => updateMessageList(messageActions.DELETE, id)}\n            >\n              &times;\n            </span>\n            {source && <strong>{source}: </strong>}\n            {text}\n          </div>\n        );\n      })}\n\n      {code === 1 ? (\n        <ButtonList hashItems={payload} updateMessageList={updateMessageList} />\n      ) : (\n        <LoginButton />\n      )}\n    </div>\n  );\n}\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport App from \"./Components/App\";\nimport \"./index.css\";\n//import reportWebVitals from \"./reportWebVitals\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <h1 id=\"title\">Gude Tunes</h1>\n    <h3 id=\"subtitle\">Utilities to enhance your Spotify‎ experience</h3>\n    <h5 id=\"help-text\">\n      Be sure to have Spotify recently paused or playing for most utilities.\n    </h5>\n    <App />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n\nconsole.log(`Git hash: ${process.env.REACT_APP_VERSION}`);\n\n//reportWebVitals();\n"],"sourceRoot":""}