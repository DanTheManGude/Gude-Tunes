(this["webpackJsonpgude-tunes"]=this["webpackJsonpgude-tunes"]||[]).push([[0],{16:function(t,e,n){},17:function(t,e,n){"use strict";n.r(e);var o,s=n(1),c=n.n(s),i=n(7),a=n.n(i),r=n(10),u=n(4),l=n(8),f=n(9),h=n(2),d=!1,y={"dgude31@gmail.com":1,"emtemple211@gmail.com":7},p=function(t,e){return{selfPlaylist:t,otherUserId:e}},m={1:p("5zWTsTMwKffVVwnB3V04cW",7),7:p("5gR6gvNGivsJJA5bMwolTU",1)},S=["user-read-private","user-read-email","user-modify-playback-state","playlist-modify-public"],b={SUCCESS:"SUCCESS",ERROR:"ERROR",INFO:"INFO",WARNING:"WARNING"},O=function(t,e,n){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];return{text:t,name:e,function:n(e),classNames:o}},g={SHUFFLE:"SHUFFLE",SATURDAY:"SATURDAY",MYSTERY_DUCK:"MYSTERY_DUCK",CANDLES:"CANDLES",BOSTON:"BOSTON",SYNC_PLAYLISTS:"SYNC_PLAYLISTS"},w=(o={},Object(h.a)(o,g.SHUFFLE,O("Activate Shuffle","Shuffle",(function(t){return function(e,n){return E("me/player/shuffle?state=true","PUT",e,{body:""}).then((function(e){if(204!==e.status)throw e;n({type:b.SUCCESS,source:t,text:"Your playback has been shuffled."})})).catch((function(e){n({type:b.ERROR,source:t,text:"That didn't work; your playback was unchanged."})}))}}))),Object(h.a)(o,g.SATURDAY,O("Is it Saturday?","Saturday",(function(t){return function(e,n){switch((new Date).getDay()){case 1:n({type:b.INFO,source:t,text:"It is not Satuday. It is Monday, slow down."});break;case 3:n({type:b.INFO,source:t,text:"It is not Satuday. It is Wednesday, not a sound."});break;case 5:n({type:b.INFO,source:t,text:"It is not Satuday. It is Friday, might get loud."});break;case 6:n({type:b.INFO,source:t,text:"It is Satuday. We paint the town!"}),d=!0;break;default:d||n({type:b.INFO,source:t,text:"It is not Satuday. Have you lost your sense of time or two?"})}d&&E("me/player/play","PUT",e,{body:JSON.stringify({context_uri:"spotify:album:0Q5XBpCYFgUWiG9DUWyAmJ",offset:{position:4}})}).then((function(e){if(204!==e.status)throw e;n({type:b.SUCCESS,source:t,text:"Life moves slow on the ocean floor (feeling great)"})})).catch((function(e){n({type:b.ERROR,source:t,text:e.message||"It looks like something went awry."})})),d=!0}}))),Object(h.a)(o,"MYSTERY_DUCK",O("Mystery \ud83e\udd86","Mystery Love",(function(t){return function(e,n,o){var s=m[o].selfPlaylist;E("playlists/".concat(s),"GET",e).then((function(t){return t.json()})).then((function(o){var s=o.tracks,c=s.total,i=s.items[Date.now()%c].track.uri;E("me/player/queue","POST",e,void 0,{uri:i}).then((function(e){if(204!==e.status)throw e;n({type:b.SUCCESS,source:t,text:"A random song from our friends has been added to the queue. <3"})})).catch((function(t){throw t}))})).catch((function(e){n({type:b.ERROR,source:t,text:e.message||"It looks like something went awry."})}))}}))),Object(h.a)(o,g.CANDLES,O("Don't light candles","Candles",(function(t){return function(e,n){var o=j.start,s=j.end;E("me/player/play","PUT",e,{body:JSON.stringify({context_uri:"spotify:album:3QrkHSj8pBzE1Kwhpnktkw",offset:{position:4},position_ms:o})}).then((function(c){if(204!==c.status)throw c;n({type:b.SUCCESS,source:t,text:"Burning sage is cool."}),setTimeout((function(){E("me/player/pause","PUT",e,{body:""}).then((function(e){if(204!==e.status)throw e;n({type:b.INFO,source:t,text:"Don't set off the fire alarm."})})).catch((function(e){n({type:b.WARNING,source:t,text:"The song should've been paused here."})}))}),s-o)})).catch((function(e){n({type:b.ERROR,source:t,text:e.message||"It looks like something went awry."})}))}}))),Object(h.a)(o,g.BOSTON,O("Boston Bound","Boston Bound",(function(t){return function(e,n){E("me/player/queue","POST",e,void 0,{uri:"spotify:track:7rSERmjAT38lC5QhJ8hnQc"}).then((function(o){204===o.status&&E("me/player/next","POST",e,{body:""}).then((function(e){if(204!==e.status)throw e;n({type:b.SUCCESS,source:t,text:"Safe travels."})}))})).catch((function(e){n({type:b.ERROR,source:t,text:e.message||"It looks like your package is delayed."})}))}}))),Object(h.a)(o,g.SYNC_PLAYLISTS,O("Sync Playlists","Sync Playlists",(function(t){return function(e,n,o){var s=m[o],c=s.selfPlaylist,i=s.otherUserId,a=m[i].selfPlaylist;Promise.all([A(c,e),A(a,e)]).then((function(o){var s=Object(u.a)(o,2),i=s[0],a=s[1].filter((function(t){return!i.includes(t)}));E("playlists/".concat(c,"/tracks"),"POST",e,{body:JSON.stringify({uris:a})}).then((function(e){if(201!==e.status)throw e;n({type:b.SUCCESS,source:t,text:"Our playlists have been synced."})})).catch((function(t){throw t}))})).catch((function(e){n({type:b.ERROR,source:t,text:e.message||"It looks like something went awry."})}))}}),["sync-playlist-btn"])),o),j={start:13930,end:21200},v="service_sbv0ia4",k="template_fe1e5ws",x="user_2K4sBJkaEW2m7T8CPrYhp",R=n(0),C=function(){var t=encodeURIComponent(window.location.href),e=S.join("%20");window.location.href="https://accounts.spotify.com/authorize?client_id=125aeb2f61c242c68fe33802c481bb08&redirect_uri=".concat(t,"&scope=").concat(e,"&response_type=token&state=202102121300")},E=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"GET",n=arguments.length>2?arguments[2]:void 0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"";return fetch("https://api.spotify.com/v1/".concat(t).concat(s&&Object.keys(s).reduce((function(t,e,n){return"".concat(t).concat(0===n?"?":"&").concat(e,"=").concat(s[e])}),"")),Object(l.a)({method:e,headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(n)}},o))},N=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){},o=arguments.length>3?arguments[3]:void 0;return function(){w[t].function(e,n,o)}},T=function(t){var e=t.displayName,n=t.email;return"mailto:dgude31@outlook.com?subject=Gude%20Tunes%20Access&body=Hello%2C%0D%0A%0D%0AI%20would%20like%20to%20have%20access%20to%20the%20Gude%20Tunes%20website%20functionality%2C%20but%20the%20request%20button%20did%20not%20work.%20My%20name%20is%2C%20".concat(e,"%2C%20and%20my%20email%20is%2C%20").concat(n,".%0D%0A%0D%0AThhank%20you!")},I=function(t,e){return function(){var n="Request Access",o=v,s=k,c=x;f.a.send(o,s,e,c).then((function(e){t({type:b.SUCCESS,source:n,text:"The request was put through. You should recieve a confirmation email shortly (be sure to check your junk folder)."},1e4)}),(function(o){t({type:b.ERROR,source:n,text:Object(R.jsxs)("span",{children:["The request was unsuccessful. You can reach out to\xa0",Object(R.jsx)("a",{href:T(e),children:"dgude31@outlook.com"}),"\xa0directly."]})})}))}},A=function(t,e){return E("playlists/".concat(t),"GET",e).then((function(t){if(200!==t.status)throw t;return t.json()})).then((function(t){return t.tracks.items.map((function(t){return t.track.uri}))}))};var U=function(){var t=function(){var t={code:null,hashItems:{},message:""},e=new URLSearchParams(window.location.search),n=Object.fromEntries(e.entries());if(n.hasOwnProperty("error"))t.code=-1,t.message=n.error;else if(window.location.hash){var o=window.location.hash.substr(1).split("&").reduce((function(t,e){var n=e.split("=");return t[n[0]]=n[1],t}),{});o.hasOwnProperty("access_token")?(t.code=1,t.hashItems=o):(t.code=-1,t.message="Hash does not include access_token")}else t.code=0,t.message="Missing hash in the url";return t}(),e=t.code,n=t.message,o=t.hashItems.access_token,c=Object(s.useState)([]),i=Object(u.a)(c,2),a=i[0],l=i[1],f=Object(s.useState)(),h=Object(u.a)(f,2),d=h[0],p=h[1],m=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:6001;l((function(e){return e.concat(t)})),setTimeout((function(){l((function(t){return t.slice(1)}))}),e)};return Object(s.useEffect)((function(){var t=-1===e?{type:b.ERROR,text:n}:1===e?{type:b.SUCCESS,text:"Login succesfull!"}:{type:b.INFO,source:"Welcome",text:"Please login below to use the app."};m(t)}),[e,n]),Object(s.useEffect)((function(){o&&(console.log(o),E("me","GET",o).then((function(t){return t.json()})).then((function(t){var e=t.email,n=t.display_name,o=!Object.keys(y).includes(e);o&&m({type:b.INFO,source:"Application",text:"Sorry ".concat(n,", Only designated Spotify accounts can use the application. Click below to request access.")},12e3),p({isNew:o,info:{email:e,displayName:n}})})).catch((function(t){m({type:b.WARNING,source:"Application",text:"Something isn't right, the app may be currently unavailable."}),console.error(t)})))}),[o]),Object(R.jsxs)("div",{children:[Object(R.jsx)("div",{children:a.map((function(t,e){var n=t.type,o=t.text,s=t.source,c=void 0===s?"":s;return Object(R.jsxs)("div",{className:"message msg-".concat(n),children:[c&&Object(R.jsxs)("strong",{children:[c,": "]}),o]},"msg-".concat(e))}))}),d?d.isNew?Object(R.jsx)("button",{className:"utility-btn new-user-btn",onClick:I(m,d.info),children:"Request Access"},"NEWUSER"):1===e?function(t){var e=Object.keys(g);switch(y[t]){case 1:case 7:return e;default:return e.filter((function(t){return![g.SYNC_PLAYLISTS,g.MYSTERY_DUCK,g.CANDLES].includes(t)}))}}(d.info.email).map((function(t){var e=w[t],n=e.text,s=e.classNames;return Object(R.jsx)("button",{className:["utility-btn"].concat(Object(r.a)(s)).join(" "),onClick:N(t,o,m,y[d.info.email]),children:n},t)})):void 0:Object(R.jsx)("button",{className:"loginButton",onClick:C,children:"Login"})]})};n(16);a.a.render(Object(R.jsxs)(c.a.StrictMode,{children:[Object(R.jsx)("h1",{id:"title",children:"Gude Tunes"}),Object(R.jsx)("h3",{id:"subtitle",children:"Utilities to enhance your Spotify\u200e\xa0experience"}),Object(R.jsx)("h5",{id:"help-text",children:"Be sure to have Spotify recently paused or playing for most utilities."}),Object(R.jsx)(U,{})]}),document.getElementById("root")),console.log("Git hash: ".concat("e5c956c89dbad01ed9fe084c6345aa27764b168c"))}},[[17,1,2]]]);
//# sourceMappingURL=main.453fe53d.chunk.js.map