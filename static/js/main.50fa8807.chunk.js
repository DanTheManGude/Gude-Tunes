(this["webpackJsonpgude-tunes"]=this["webpackJsonpgude-tunes"]||[]).push([[0],{19:function(t,e,n){},20:function(t,e,n){"use strict";n.r(e);var o,c=n(2),s=n.n(c),a=n(8),i=n.n(a),r=n(12),u=n(4),l=n(9),f=n(11),h=n(1),d=n(7),y=n.n(d),p=n(10),m=function(t){return t.json()},S=!1,b={"dgude31@gmail.com":1,"emtemple211@gmail.com":7},O=function(t,e){return{selfPlaylist:t,otherUserId:e}},j={1:O("5zWTsTMwKffVVwnB3V04cW",7),7:O("5gR6gvNGivsJJA5bMwolTU",1)},w=["user-read-private","user-read-email","user-modify-playback-state","playlist-modify-public","playlist-modify-private","playlist-read-private"],g={SUCCESS:"SUCCESS",ERROR:"ERROR",INFO:"INFO",WARNING:"WARNING"},v=function(t,e,n){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];return{text:t,name:e,function:n(e),classNames:o}},x={SHUFFLE:"SHUFFLE",SATURDAY:"SATURDAY",WBAB:"WBAB",MYSTERY_DUCK:"MYSTERY_DUCK",CANDLES:"CANDLES",BOSTON:"BOSTON",SYNC_PLAYLISTS:"SYNC_PLAYLISTS"},C=(o={},Object(h.a)(o,x.SHUFFLE,v("Activate Shuffle","Shuffle",(function(t){return function(e,n){return U("me/player/shuffle?state=true","PUT",e,{body:""}).then((function(e){if(204!==e.status)throw e;n({type:g.SUCCESS,source:t,text:"Your playback has been shuffled."})})).catch(_(n,t))}}))),Object(h.a)(o,x.SATURDAY,v("Is it Saturday?","Saturday",(function(t){return function(e,n){switch((new Date).getDay()){case 1:n({type:g.INFO,source:t,text:"It is not Satuday. It is Monday, slow down."});break;case 3:n({type:g.INFO,source:t,text:"It is not Satuday. It is Wednesday, not a sound."});break;case 5:n({type:g.INFO,source:t,text:"It is not Satuday. It is Friday, might get loud."});break;case 6:n({type:g.INFO,source:t,text:"It is Satuday. We paint the town!"}),S=!0;break;default:S||n({type:g.INFO,source:t,text:"It is not Satuday. Have you lost your sense of time or two?"})}S&&U("me/player/play","PUT",e,{body:JSON.stringify({context_uri:"spotify:album:0Q5XBpCYFgUWiG9DUWyAmJ",offset:{position:4}})}).then((function(e){if(204!==e.status)throw e;n({type:g.SUCCESS,source:t,text:"Life moves slow on the ocean floor (feeling great)"})})).catch(_(n,t)),S=!0}}))),Object(h.a)(o,"MYSTERY_DUCK",v("Mystery \ud83e\udd86","Mystery Love",(function(t){return function(e,n,o){var c=j[o].selfPlaylist;U("playlists/".concat(c),"GET",e).then((function(t){return t.json()})).then((function(o){var c=o.tracks,s=c.total,a=c.items[Date.now()%s].track.uri;U("me/player/queue","POST",e,void 0,{uri:a}).then((function(e){if(204!==e.status)throw e;n({type:g.SUCCESS,source:t,text:"A random song from our friends has been added to the queue. <3"})})).catch(_(n,t))})).catch(_(n,t))}}))),Object(h.a)(o,x.CANDLES,v("Don't light candles","Candles",(function(t){return function(e,n){var o=N.start,c=N.end;U("me/player/play","PUT",e,{body:JSON.stringify({context_uri:"spotify:album:3QrkHSj8pBzE1Kwhpnktkw",offset:{position:4},position_ms:o})}).then((function(s){if(204!==s.status)throw s;n({type:g.SUCCESS,source:t,text:"Burning sage is cool."}),setTimeout((function(){U("me/player/pause","PUT",e,{body:""}).then((function(e){if(204!==e.status)throw e;n({type:g.INFO,source:t,text:"Don't set off the fire alarm."})})).catch((function(e){n({type:g.WARNING,source:t,text:"The song should've been paused here."})}))}),c-o)})).catch(_(n,t))}}))),Object(h.a)(o,x.BOSTON,v("Boston Bound","Boston Bound",(function(t){return function(e,n){U("me/player/queue","POST",e,void 0,{uri:"spotify:track:7rSERmjAT38lC5QhJ8hnQc"}).then((function(o){204===o.status&&U("me/player/next","POST",e,{body:""}).then((function(e){if(204!==e.status)throw e;n({type:g.SUCCESS,source:t,text:"Safe travels."})}))})).catch(_(n,t))}}))),Object(h.a)(o,x.SYNC_PLAYLISTS,v("Sync Playlists","Sync Playlists",(function(t){return function(e,n,o){var c=j[o],s=c.selfPlaylist,a=c.otherUserId,i=j[a].selfPlaylist;Promise.all([Y(s,e),Y(i,e)]).then((function(o){var c=Object(u.a)(o,2),a=c[0],i=c[1].filter((function(t){return!a.includes(t)}));0===i.length?n({type:g.INFO,source:t,text:"Our playlists are already synced."}):U("playlists/".concat(s,"/tracks"),"POST",e,{body:JSON.stringify({uris:i})}).then((function(e){if(201!==e.status)throw e;n({type:g.SUCCESS,source:t,text:"Our playlists have been synced. :)"})})).catch(_(n,t))})).catch(_(n,t))}}),["sync-playlist-btn"])),Object(h.a)(o,x.WBAB,v("Play from WBAB","WBAB",(function(t){return function(){var e=Object(p.a)(y.a.mark((function e(n,o){var c,s,a,i,r,u,l;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c="6E1FWxZoNQelXt3EAQ4Xe6",e.next=4,U("playlists/".concat(c,"?fields=tracks.total"),"GET",n).then(m);case 4:return s=e.sent,a=Date.now()%s.tracks.total,e.next=8,U("playlists/".concat(c,"/tracks?fields=items(track(duration_ms))&offset=").concat(a,"&limit=1"),"GET",n).then(m);case 8:return i=e.sent,r=i.items[0].track.duration_ms,u=Date.now()%r,e.next=13,U("me/player/play","PUT",n,{body:JSON.stringify({context_uri:"spotify:playlist:".concat(c),offset:{position:a},position_ms:u})});case 13:if(l=e.sent,204===l.status){e.next=17;break}throw l;case 17:o({type:g.SUCCESS,source:t,text:"You are listeing to WBAB 102.3 Long Island's only classic rock"});case 18:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}))),o),N={start:13930,end:21200},k="service_sbv0ia4",E="template_fe1e5ws",T="user_2K4sBJkaEW2m7T8CPrYhp",A=n(0),I=function(){var t=encodeURIComponent(window.location.href),e=w.join("%20");window.location.href="https://accounts.spotify.com/authorize?client_id=125aeb2f61c242c68fe33802c481bb08&redirect_uri=".concat(t,"&scope=").concat(e,"&response_type=token&state=202102121300")},U=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"GET",n=arguments.length>2?arguments[2]:void 0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},c=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"";return fetch("https://api.spotify.com/v1/".concat(t).concat(c&&Object.keys(c).reduce((function(t,e,n){return"".concat(t).concat(0===n?"?":"&").concat(e,"=").concat(c[e])}),"")),Object(l.a)({method:e,headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(n)}},o))},R=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){},o=arguments.length>3?arguments[3]:void 0;return function(){C[t].function(e,n,o)}},B=function(t){var e=t.displayName,n=t.email;return"mailto:dgude31@outlook.com?subject=Gude%20Tunes%20Access&body=Hello%2C%0D%0A%0D%0AI%20would%20like%20to%20have%20access%20to%20the%20Gude%20Tunes%20website%20functionality%2C%20but%20the%20request%20button%20did%20not%20work.%20My%20name%20is%2C%20".concat(e,"%2C%20and%20my%20email%20is%2C%20").concat(n,".%0D%0A%0D%0AThhank%20you!")},P=function(t,e){return function(){var n="Request Access",o=k,c=E,s=T;f.a.send(o,c,e,s).then((function(e){t({type:g.SUCCESS,source:n,text:"The request was put through. You should recieve a confirmation email shortly (be sure to check your junk folder)."},1e4)}),(function(o){t({type:g.ERROR,source:n,text:Object(A.jsxs)("span",{children:["The request was unsuccessful. You can reach out to\xa0",Object(A.jsx)("a",{href:B(e),children:"dgude31@outlook.com"}),"\xa0directly."]})})}))}},Y=function(t,e){return U("playlists/".concat(t),"GET",e).then((function(t){if(200!==t.status)throw t;return t.json()})).then((function(t){return t.tracks.items.map((function(t){return t.track.uri}))}))},_=function(t,e){return function(n){t({type:g.ERROR,source:e,text:n.message||"It looks like something went awry."})}};var D=function(){var t=function(){var t={code:null,hashItems:{},message:""},e=new URLSearchParams(window.location.search),n=Object.fromEntries(e.entries());if(n.hasOwnProperty("error"))t.code=-1,t.message=n.error;else if(window.location.hash){var o=window.location.hash.substr(1).split("&").reduce((function(t,e){var n=e.split("=");return t[n[0]]=n[1],t}),{});o.hasOwnProperty("access_token")?(t.code=1,t.hashItems=o):(t.code=-1,t.message="Hash does not include access_token")}else t.code=0,t.message="Missing hash in the url";return t}(),e=t.code,n=t.message,o=t.hashItems.access_token,s=Object(c.useState)([]),a=Object(u.a)(s,2),i=a[0],l=a[1],f=Object(c.useState)(),h=Object(u.a)(f,2),d=h[0],y=h[1],p=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:6001;l((function(e){return e.concat(t)})),setTimeout((function(){l((function(t){return t.slice(1)}))}),e)};return Object(c.useEffect)((function(){var t=-1===e?{type:g.ERROR,text:n}:1===e?{type:g.SUCCESS,text:"Login succesfull!"}:{type:g.INFO,source:"Welcome",text:"Please login below to use the app."};p(t)}),[e,n]),Object(c.useEffect)((function(){o&&(console.log(o),U("me","GET",o).then((function(t){return 401===t.status&&(window.location.href="".concat(window.location.origin).concat(window.location.pathname)),t.json()})).then((function(t){var e=t.email,n=t.display_name,o=!Object.keys(b).includes(e);o&&p({type:g.INFO,source:"Application",text:"Sorry ".concat(n,", Only designated Spotify accounts can use the application. Click below to request access.")},12e3),y({isNew:o,info:{email:e,displayName:n}})})).catch((function(t){p({type:g.WARNING,source:"Application",text:"Something isn't right, the app may be currently unavailable."}),console.error(t)})))}),[o]),Object(A.jsxs)("div",{children:[Object(A.jsx)("div",{children:i.map((function(t,e){var n=t.type,o=t.text,c=t.source,s=void 0===c?"":c;return Object(A.jsxs)("div",{className:"message msg-".concat(n),children:[s&&Object(A.jsxs)("strong",{children:[s,": "]}),o]},"msg-".concat(e))}))}),d?d.isNew?Object(A.jsx)("button",{className:"utility-btn new-user-btn",onClick:P(p,d.info),children:"Request Access"},"NEWUSER"):1===e?function(t){var e=Object.keys(x);switch(b[t]){case 1:case 7:return e;default:return e.filter((function(t){return![x.SYNC_PLAYLISTS,x.MYSTERY_DUCK,x.CANDLES,x.WBAB].includes(t)}))}}(d.info.email).map((function(t){var e=C[t],n=e.text,c=e.classNames;return Object(A.jsx)("button",{className:["utility-btn"].concat(Object(r.a)(c)).join(" "),onClick:R(t,o,p,b[d.info.email]),children:n},t)})):void 0:Object(A.jsx)("button",{className:"loginButton",onClick:I,children:"Login"})]})};n(19);i.a.render(Object(A.jsxs)(s.a.StrictMode,{children:[Object(A.jsx)("h1",{id:"title",children:"Gude Tunes"}),Object(A.jsx)("h3",{id:"subtitle",children:"Utilities to enhance your Spotify\u200e\xa0experience"}),Object(A.jsx)("h5",{id:"help-text",children:"Be sure to have Spotify recently paused or playing for most utilities."}),Object(A.jsx)(D,{})]}),document.getElementById("root")),console.log("Git hash: ".concat("c2229e97a8cf7eee14c1ac1d816bf4f51fcbc4ed"))}},[[20,1,2]]]);
//# sourceMappingURL=main.50fa8807.chunk.js.map