{"version":3,"sources":["ButtonFunctions.js","Constants.js","Utils.js","App.js","index.js"],"names":["playSaturday","existingUsersMap","createUserPlaylistValue","selfPlaylist","otherUserId","userPlaylistMap","scopesList","messageTypes","SUCCESS","ERROR","INFO","WARNING","createProperty","text","name","func","classNames","function","BUTTON_IDS","SHUFFLE","SATURDAY","MYSTERY_DUCK","CANDLES","BOSTON","SYNC_PLAYLISTS","buttonProperties","access_token","addNewMessage","makeRequest","body","then","response","status","type","source","catch","error","Date","getDay","JSON","stringify","context_uri","offset","position","message","userId","r","json","tracks","total","trackURI","items","now","track","uri","undefined","resp","start","candlesTime","end","position_ms","setTimeout","otherPlaylist","Promise","all","requestPlaylistUris","selfUris","toAddUris","filter","includes","uris","emailConfig","requestAuth","redirectUri","encodeURIComponent","window","location","href","scopes","join","path","method","fields","queryParams","fetch","Object","keys","reduce","acc","element","index","headers","Accept","Authorization","getButtonOnClick","buttonId","getEmailLink","displayName","email","getSendEmail","userInfo","messageSource","serviceId","templateId","emailjs","send","playlistId","map","item","App","authentication","code","hashItems","urlSearchParams","URLSearchParams","search","params","fromEntries","entries","hasOwnProperty","hash","substr","split","parts","calculateAuthentication","useState","messageList","setMessageList","user","setUser","newMessage","time","currentState","concat","slice","useEffect","startingMessage","console","log","display_name","isNew","info","className","onClick","userEmail","allButtonIds","id","getButtonIdsForUser","ReactDOM","render","StrictMode","document","getElementById","process"],"mappings":"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","file":"static/js/main.453fe53d.chunk.js","sourcesContent":["import { makeRequest, requestPlaylistUris } from \"./Utils\";\nimport { messageTypes, candlesTime, userPlaylistMap } from \"./Constants\";\n\nexport const shuffleFunction = (name) => (access_token, addNewMessage) =>\n  makeRequest(\"me/player/shuffle?state=true\", \"PUT\", access_token, {\n    body: \"\",\n  })\n    .then((response) => {\n      const { status } = response;\n      if (status === 204) {\n        addNewMessage({\n          type: messageTypes.SUCCESS,\n          source: name,\n          text: \"Your playback has been shuffled.\",\n        });\n      } else {\n        throw response;\n      }\n    })\n    .catch((error) => {\n      addNewMessage({\n        type: messageTypes.ERROR,\n        source: name,\n        text: \"That didn't work; your playback was unchanged.\",\n      });\n    });\n\nexport const candlesFunction = (name) => (access_token, addNewMessage) => {\n  const { start, end } = candlesTime;\n\n  makeRequest(\"me/player/play\", \"PUT\", access_token, {\n    body: JSON.stringify({\n      context_uri: \"spotify:album:3QrkHSj8pBzE1Kwhpnktkw\",\n      offset: {\n        position: 4,\n      },\n      position_ms: start,\n    }),\n  })\n    .then((response) => {\n      const { status } = response;\n      if (status === 204) {\n        addNewMessage({\n          type: messageTypes.SUCCESS,\n          source: name,\n          text: \"Burning sage is cool.\",\n        });\n        setTimeout(() => {\n          makeRequest(\"me/player/pause\", \"PUT\", access_token, {\n            body: \"\",\n          })\n            .then((resp) => {\n              const { status: statusCode } = resp;\n              if (statusCode === 204) {\n                addNewMessage({\n                  type: messageTypes.INFO,\n                  source: name,\n                  text: \"Don't set off the fire alarm.\",\n                });\n              } else {\n                throw resp;\n              }\n            })\n            .catch((error) => {\n              addNewMessage({\n                type: messageTypes.WARNING,\n                source: name,\n                text: \"The song should've been paused here.\",\n              });\n            });\n        }, end - start);\n      } else {\n        throw response;\n      }\n    })\n    .catch((error) => {\n      addNewMessage({\n        type: messageTypes.ERROR,\n        source: name,\n        text: error.message || \"It looks like something went awry.\",\n      });\n    });\n};\n\nexport const bostonFunction = (name) => (access_token, addNewMessage) => {\n  makeRequest(\"me/player/queue\", \"POST\", access_token, undefined, {\n    uri: \"spotify:track:7rSERmjAT38lC5QhJ8hnQc\",\n  })\n    .then((response) => {\n      const { status } = response;\n      if (status === 204) {\n        makeRequest(\"me/player/next\", \"POST\", access_token, {\n          body: \"\",\n        }).then((response) => {\n          const { status } = response;\n          if (status === 204) {\n            addNewMessage({\n              type: messageTypes.SUCCESS,\n              source: name,\n              text: \"Safe travels.\",\n            });\n          } else {\n            throw response;\n          }\n        });\n      }\n    })\n    .catch((error) => {\n      addNewMessage({\n        type: messageTypes.ERROR,\n        source: name,\n        text: error.message || \"It looks like your package is delayed.\",\n      });\n    });\n};\n\nvar playSaturday = false;\nexport const saturdayFunction = (name) => (access_token, addNewMessage) => {\n  const day = new Date().getDay();\n\n  switch (day) {\n    case 1:\n      addNewMessage({\n        type: messageTypes.INFO,\n        source: name,\n        text: \"It is not Satuday. It is Monday, slow down.\",\n      });\n      break;\n    case 3:\n      addNewMessage({\n        type: messageTypes.INFO,\n        source: name,\n        text: \"It is not Satuday. It is Wednesday, not a sound.\",\n      });\n      break;\n    case 5:\n      addNewMessage({\n        type: messageTypes.INFO,\n        source: name,\n        text: \"It is not Satuday. It is Friday, might get loud.\",\n      });\n      break;\n    case 6:\n      addNewMessage({\n        type: messageTypes.INFO,\n        source: name,\n        text: \"It is Satuday. We paint the town!\",\n      });\n      playSaturday = true;\n      break;\n    default:\n      if (!playSaturday) {\n        addNewMessage({\n          type: messageTypes.INFO,\n          source: name,\n          text: \"It is not Satuday. Have you lost your sense of time or two?\",\n        });\n      }\n      break;\n  }\n\n  if (playSaturday) {\n    makeRequest(\"me/player/play\", \"PUT\", access_token, {\n      body: JSON.stringify({\n        context_uri: \"spotify:album:0Q5XBpCYFgUWiG9DUWyAmJ\",\n        offset: {\n          position: 4,\n        },\n      }),\n    })\n      .then((response) => {\n        const { status } = response;\n        if (status === 204) {\n          addNewMessage({\n            type: messageTypes.SUCCESS,\n            source: name,\n            text: \"Life moves slow on the ocean floor (feeling great)\",\n          });\n        } else {\n          throw response;\n        }\n      })\n      .catch((error) => {\n        addNewMessage({\n          type: messageTypes.ERROR,\n          source: name,\n          text: error.message || \"It looks like something went awry.\",\n        });\n      });\n  }\n  playSaturday = true;\n};\n\nexport const mysteryDuckFunction =\n  (name) => (access_token, addNewMessage, userId) => {\n    const { selfPlaylist } = userPlaylistMap[userId];\n\n    makeRequest(`playlists/${selfPlaylist}`, \"GET\", access_token)\n      .then((r) => r.json())\n      .then((response) => {\n        const { tracks } = response;\n        const { total, items } = tracks;\n        const trackIndex = Date.now() % total;\n        const trackURI = items[trackIndex].track.uri;\n        makeRequest(\"me/player/queue\", \"POST\", access_token, undefined, {\n          uri: trackURI,\n        })\n          .then((resp) => {\n            const { status } = resp;\n            if (status !== 204) {\n              throw resp;\n            }\n            addNewMessage({\n              type: messageTypes.SUCCESS,\n              source: name,\n              text: \"A random song from our friends has been added to the queue. <3\",\n            });\n          })\n          .catch((error) => {\n            throw error;\n          });\n      })\n      .catch((error) => {\n        addNewMessage({\n          type: messageTypes.ERROR,\n          source: name,\n          text: error.message || \"It looks like something went awry.\",\n        });\n      });\n  };\n\nexport const syncPlaylistsFunction =\n  (name) => (access_token, addNewMessage, userId) => {\n    const { selfPlaylist, otherUserId } = userPlaylistMap[userId];\n    const { selfPlaylist: otherPlaylist } = userPlaylistMap[otherUserId];\n\n    Promise.all([\n      requestPlaylistUris(selfPlaylist, access_token),\n      requestPlaylistUris(otherPlaylist, access_token),\n    ])\n      .then(([selfUris, otherUris]) => {\n        const toAddUris = otherUris.filter((uri) => !selfUris.includes(uri));\n        makeRequest(`playlists/${selfPlaylist}/tracks`, \"POST\", access_token, {\n          body: JSON.stringify({\n            uris: toAddUris,\n          }),\n        })\n          .then((response) => {\n            const { status } = response;\n            if (status !== 201) {\n              throw response;\n            }\n            addNewMessage({\n              type: messageTypes.SUCCESS,\n              source: name,\n              text: \"Our playlists have been synced.\",\n            });\n          })\n          .catch((error) => {\n            throw error;\n          });\n      })\n      .catch((error) => {\n        addNewMessage({\n          type: messageTypes.ERROR,\n          source: name,\n          text: error.message || \"It looks like something went awry.\",\n        });\n      });\n  };\n","import {\n  shuffleFunction,\n  saturdayFunction,\n  mysteryDuckFunction,\n  candlesFunction,\n  bostonFunction,\n  syncPlaylistsFunction,\n} from \"./ButtonFunctions\";\n\nexport const existingUsersMap = {\n  \"dgude31@gmail.com\": 1,\n  \"emtemple211@gmail.com\": 7,\n};\n\nconst createUserPlaylistValue = (selfPlaylist, otherUserId) => ({\n  selfPlaylist,\n  otherUserId,\n});\n\nexport const userPlaylistMap = {\n  1: createUserPlaylistValue(\"5zWTsTMwKffVVwnB3V04cW\", 7),\n  7: createUserPlaylistValue(\"5gR6gvNGivsJJA5bMwolTU\", 1),\n};\n\nexport const scopesList = [\n  \"user-read-private\",\n  \"user-read-email\",\n  \"user-modify-playback-state\",\n  \"playlist-modify-public\",\n];\n\nexport const messageTypes = {\n  SUCCESS: \"SUCCESS\",\n  ERROR: \"ERROR\",\n  INFO: \"INFO\",\n  WARNING: \"WARNING\",\n};\n\nconst createProperty = (text, name, func, classNames = []) => {\n  return { text, name, function: func(name), classNames };\n};\n\nexport const BUTTON_IDS = {\n  SHUFFLE: \"SHUFFLE\",\n  SATURDAY: \"SATURDAY\",\n  MYSTERY_DUCK: \"MYSTERY_DUCK\",\n  CANDLES: \"CANDLES\",\n  BOSTON: \"BOSTON\",\n  SYNC_PLAYLISTS: \"SYNC_PLAYLISTS\",\n};\n\nexport const buttonProperties = {\n  [BUTTON_IDS.SHUFFLE]: createProperty(\n    \"Activate Shuffle\",\n    \"Shuffle\",\n    shuffleFunction\n  ),\n  [BUTTON_IDS.SATURDAY]: createProperty(\n    \"Is it Saturday?\",\n    \"Saturday\",\n    saturdayFunction\n  ),\n  MYSTERY_DUCK: createProperty(\n    \"Mystery 🦆\",\n    \"Mystery Love\",\n    mysteryDuckFunction\n  ),\n  [BUTTON_IDS.CANDLES]: createProperty(\n    \"Don't light candles\",\n    \"Candles\",\n    candlesFunction\n  ),\n  [BUTTON_IDS.BOSTON]: createProperty(\n    \"Boston Bound\",\n    \"Boston Bound\",\n    bostonFunction\n  ),\n  [BUTTON_IDS.SYNC_PLAYLISTS]: createProperty(\n    \"Sync Playlists\",\n    \"Sync Playlists\",\n    syncPlaylistsFunction,\n    [\"sync-playlist-btn\"]\n  ),\n};\n\nexport const candlesTime = { start: 13930, end: 21200 };\n\nexport const emailConfig = {\n  serviceId: \"service_sbv0ia4\",\n  templateId: \"template_fe1e5ws\",\n  userId: \"user_2K4sBJkaEW2m7T8CPrYhp\",\n};\n","import emailjs from \"emailjs-com\";\nimport {\n  scopesList,\n  messageTypes,\n  BUTTON_IDS,\n  existingUsersMap,\n  emailConfig,\n  buttonProperties,\n} from \"./Constants\";\n\nexport const calculateAuthentication = () => {\n  const authentication = { code: null, hashItems: {}, message: \"\" };\n\n  const urlSearchParams = new URLSearchParams(window.location.search);\n  const params = Object.fromEntries(urlSearchParams.entries());\n\n  if (params.hasOwnProperty(\"error\")) {\n    authentication.code = -1;\n    authentication.message = params.error;\n  } else if (!window.location.hash) {\n    authentication.code = 0;\n    authentication.message = \"Missing hash in the url\";\n  } else {\n    const hashItems = window.location.hash\n      .substr(1)\n      .split(\"&\")\n      .reduce((acc, element) => {\n        const parts = element.split(\"=\");\n        acc[parts[0]] = parts[1];\n        return acc;\n      }, {});\n    if (hashItems.hasOwnProperty(\"access_token\")) {\n      authentication.code = 1;\n      authentication.hashItems = hashItems;\n    } else {\n      authentication.code = -1;\n      authentication.message = \"Hash does not include access_token\";\n    }\n  }\n\n  return authentication;\n};\n\nexport const requestAuth = () => {\n  const redirectUri = encodeURIComponent(window.location.href);\n  const scopes = scopesList.join(\"%20\");\n  window.location.href = `https://accounts.spotify.com/authorize?client_id=125aeb2f61c242c68fe33802c481bb08&redirect_uri=${redirectUri}&scope=${scopes}&response_type=token&state=202102121300`;\n};\n\nexport const getButtonIdsForUser = (userEmail) => {\n  const allButtonIds = Object.keys(BUTTON_IDS);\n  switch (existingUsersMap[userEmail]) {\n    case 1:\n      return allButtonIds;\n    case 7:\n      return allButtonIds;\n    default:\n      return allButtonIds.filter(\n        (id) =>\n          ![\n            BUTTON_IDS.SYNC_PLAYLISTS,\n            BUTTON_IDS.MYSTERY_DUCK,\n            BUTTON_IDS.CANDLES,\n          ].includes(id)\n      );\n  }\n};\n\nexport const makeRequest = (\n  path,\n  method = \"GET\",\n  access_token,\n  fields = {},\n  queryParams = \"\"\n) =>\n  fetch(\n    `https://api.spotify.com/v1/${path}${\n      queryParams &&\n      Object.keys(queryParams).reduce(\n        (acc, element, index) =>\n          `${acc}${index === 0 ? \"?\" : \"&\"}${element}=${queryParams[element]}`,\n        \"\"\n      )\n    }`,\n    {\n      method,\n      headers: {\n        Accept: \"application/json\",\n        \"Content-Type\": \"application/json\",\n        Authorization: `Bearer ${access_token}`,\n      },\n      ...fields,\n    }\n  );\n\nexport const getButtonOnClick =\n  (buttonId, access_token, addNewMessage = () => {}, userId) =>\n  () => {\n    buttonProperties[buttonId].function(access_token, addNewMessage, userId);\n  };\n\nconst getEmailLink = ({ displayName, email }) =>\n  `mailto:dgude31@outlook.com?subject=Gude%20Tunes%20Access&body=Hello%2C%0D%0A%0D%0AI%20would%20like%20to%20have%20access%20to%20the%20Gude%20Tunes%20website%20functionality%2C%20but%20the%20request%20button%20did%20not%20work.%20My%20name%20is%2C%20${displayName}%2C%20and%20my%20email%20is%2C%20${email}.%0D%0A%0D%0AThhank%20you!`;\n\nexport const getSendEmail = (addNewMessage, userInfo) => () => {\n  const messageSource = \"Request Access\";\n  const { serviceId, templateId, userId } = emailConfig;\n  emailjs.send(serviceId, templateId, userInfo, userId).then(\n    (response) => {\n      addNewMessage(\n        {\n          type: messageTypes.SUCCESS,\n          source: messageSource,\n          text: \"The request was put through. You should recieve a confirmation email shortly (be sure to check your junk folder).\",\n        },\n        10000\n      );\n    },\n    (error) => {\n      addNewMessage({\n        type: messageTypes.ERROR,\n        source: messageSource,\n        text: (\n          <span>\n            The request was unsuccessful. You can reach out to&nbsp;\n            <a href={getEmailLink(userInfo)}>dgude31@outlook.com</a>\n            &nbsp;directly.\n          </span>\n        ),\n      });\n    }\n  );\n};\n\nexport const requestPlaylistUris = (playlistId, access_token) =>\n  makeRequest(`playlists/${playlistId}`, \"GET\", access_token)\n    .then((resp) => {\n      const { status: statusCode } = resp;\n      if (statusCode !== 200) {\n        throw resp;\n      }\n      return resp.json();\n    })\n    .then(({ tracks: { items } }) => items.map((item) => item.track.uri));\n","import React, { useState, useEffect } from \"react\";\nimport {\n  requestAuth,\n  calculateAuthentication,\n  getButtonIdsForUser,\n  getButtonOnClick,\n  makeRequest,\n  getSendEmail,\n} from \"./Utils\";\nimport { messageTypes, buttonProperties, existingUsersMap } from \"./Constants\";\n\nfunction App() {\n  const {\n    code,\n    message,\n    hashItems: { access_token },\n  } = calculateAuthentication();\n\n  const [messageList, setMessageList] = useState([]);\n  const [user, setUser] = useState();\n\n  const addNewMessage = (newMessage, time = 6001) => {\n    setMessageList((currentState) => currentState.concat(newMessage));\n    setTimeout(() => {\n      setMessageList((currentState) => currentState.slice(1));\n    }, time);\n  };\n\n  useEffect(() => {\n    const startingMessage =\n      code === -1\n        ? {\n            type: messageTypes.ERROR,\n            text: message,\n          }\n        : code === 1\n        ? {\n            type: messageTypes.SUCCESS,\n            text: \"Login succesfull!\",\n          }\n        : {\n            type: messageTypes.INFO,\n            source: \"Welcome\",\n            text: \"Please login below to use the app.\",\n          };\n\n    addNewMessage(startingMessage);\n  }, [code, message]);\n\n  useEffect(() => {\n    if (!access_token) return;\n\n    console.log(access_token);\n    makeRequest(\"me\", \"GET\", access_token)\n      .then((r) => r.json())\n      .then((response) => {\n        const { email, display_name: displayName } = response;\n        const isNew = !Object.keys(existingUsersMap).includes(email);\n        if (isNew) {\n          addNewMessage(\n            {\n              type: messageTypes.INFO,\n              source: \"Application\",\n              text: `Sorry ${displayName}, Only designated Spotify accounts can use the application. Click below to request access.`,\n            },\n            12000\n          );\n        }\n        setUser({ isNew, info: { email, displayName } });\n      })\n      .catch((error) => {\n        addNewMessage({\n          type: messageTypes.WARNING,\n          source: \"Application\",\n          text: \"Something isn't right, the app may be currently unavailable.\",\n        });\n        console.error(error);\n      });\n  }, [access_token]);\n\n  const renderMessageList = () => {\n    return (\n      <div>\n        {messageList.map((message, index) => {\n          const { type, text, source = \"\" } = message;\n          return (\n            <div key={`msg-${index}`} className={`message msg-${type}`}>\n              {source && <strong>{source}: </strong>}\n              {text}\n            </div>\n          );\n        })}\n      </div>\n    );\n  };\n\n  const renderLoginButton = () => {\n    return (\n      <button className=\"loginButton\" onClick={requestAuth}>\n        Login\n      </button>\n    );\n  };\n\n  const renderContents = () => {\n    if (!user) {\n      return renderLoginButton();\n    }\n\n    if (user.isNew) {\n      return (\n        <button\n          key={\"NEWUSER\"}\n          className={\"utility-btn new-user-btn\"}\n          onClick={getSendEmail(addNewMessage, user.info)}\n        >\n          Request Access\n        </button>\n      );\n    }\n\n    if (code === 1) {\n      return getButtonIdsForUser(user.info.email).map((buttonId) => {\n        const { text, classNames } = buttonProperties[buttonId];\n        return (\n          <button\n            key={buttonId}\n            className={[\"utility-btn\", ...classNames].join(\" \")}\n            onClick={getButtonOnClick(\n              buttonId,\n              access_token,\n              addNewMessage,\n              existingUsersMap[user.info.email]\n            )}\n          >\n            {text}\n          </button>\n        );\n      });\n    }\n  };\n\n  return (\n    <div>\n      {renderMessageList()}\n      {renderContents()}\n    </div>\n  );\n}\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport App from \"./App\";\nimport \"./index.css\";\n//import reportWebVitals from \"./reportWebVitals\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <h1 id=\"title\">Gude Tunes</h1>\n    <h3 id=\"subtitle\">Utilities to enhance your Spotify‎ experience</h3>\n    <h5 id=\"help-text\">\n      Be sure to have Spotify recently paused or playing for most utilities.\n    </h5>\n    <App />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n\nconsole.log(`Git hash: ${process.env.REACT_APP_VERSION}`);\n\n//reportWebVitals();\n"],"sourceRoot":""}